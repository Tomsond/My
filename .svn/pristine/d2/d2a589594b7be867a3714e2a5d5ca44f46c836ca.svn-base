/**
 * 
 */
package com.thinkive.fxc.ismp.bus.base.business.dao;

import java.util.List;

import com.thinkive.base.jdbc.DBPage;
import com.thinkive.base.jdbc.DataRow;
import com.thinkive.base.jdbc.session.Session;
import com.thinkive.fxc.ismp.bus.base.business.model.BusinessEntityModel;
import com.thinkive.fxc.ismp.bus.base.business.vo.BusinessEntityAndConfigVO;

/**
 * @描述: 业务办理实例表(T_ISMP_BUSINESS_ENTITY) 数据访问层
 * @版权: Copyright (c) 2016 
 * @公司: 深圳市思迪信息技术股份有限公司
 * @作者: 尹杰民
 * @版本: 2.0 
 * @创建时间: 2016年8月15日 下午4:14:53
 */
public interface BusinessEntityDao
{
	
	/** 
	 * @描述: 添加业务办理实例
	 * @作者: 尹杰民
	 * @时间：2016年8月17日 下午3:59:13
	 * @param  businessFlowModel
	 * @return BusinessFlowModel    
	 * @
	 */
	public BusinessEntityModel add(BusinessEntityModel businessFlowModel);
	
	/** 
	* @描述: 更新业务办理实例
	* @作者: 尹杰民
	* @时间：2016年8月17日 下午3:59:13
	* @param  businessFlowModel
	*/
	public int update(BusinessEntityModel businessFlowModel);
	
	/** 
	* @描述: 根据userId,businessCode和iscomplete查询业务办理实例(条件之间可任意组装)
	* @作者: 尹杰民
	* @时间：2016年8月17日 下午3:59:13
	* @param  userId
	* @param  businessCode
	* @param  iscomplete
	* @return BusinessFlowModel    
	* @
	*/
	public List<BusinessEntityModel> queryByParams(Long userId, String businessCode, String iscomplete);
	
	/** 
	* @描述: 根据userId,businessCode和iscomplete查询业务办理实例(条件之间可任意组装)
	* @作者: 尹杰民
	* @时间：2016年8月17日 下午3:59:13
	* @param  userId
	* @param  businessCode
	* @param  iscomplete
	* @return BusinessFlowModel    
	* @
	*/
	public List<BusinessEntityModel> queryByParams(Long userId,Long businessId, String businessCode, String iscomplete);
	
	/**
	 * @描述：根据用户编号和业务编号查询未完成的业务实例和业务属性配置视图（系统同一个业务只允许有一条未完成的业务实例）
	 * @作者：刘恺
	 * @时间：2016年8月22日 下午2:35:40
	 * @param userId		用户编号
	 * @param businessCode	业务编号
	 * @return
	 */
	public BusinessEntityAndConfigVO queryEacVoNotCompleteByUserIdAndBusinessCode(long userId, String businessCode);
	
	/**
	 * @描述：更新业务办理实例,有事务管理
	 * @作者：刘恺
	 * @时间：2016年8月24日 下午1:21:27
	 * @param businessFlowModel
	 * @param session
	 * @return
	 */
	public int update(BusinessEntityModel businessFlowModel, Session session) throws Exception;
	
	/**
	 * @描述：更具用户编号和业务编号查询办理中的业务实例
	 * @作者：刘恺
	 * @时间：2016年8月26日 上午11:31:14
	 * @param userId
	 * @param businessCode
	 * @return
	 */
	public BusinessEntityModel querNotCompleteByUserIdAndBusinessCode(long userId, String businessCode);
	
	/**
	 * @描述：添加业务办理实例，有事务管理
	 * @作者：刘恺
	 * @时间：2016年8月28日 上午1:19:43
	 * @param businessEntityModel
	 * @param session
	 * @return
	 * @throws Exception
	 */
	BusinessEntityModel add(BusinessEntityModel businessEntityModel, Session session) throws Exception;
	
	/**
	 * @描述：根据条件查询业务办理数据，如果业务包含业务拓展信息表，动态匹配业务拓展信息表
	 * @作者：田源
	 * @时间：2016年9月12日 下午8:09:26
	 * @param businessId
	 * @param businessCode
	 * @param userId
	 * @return List<DataRow>
	 */
	public List<DataRow> queryBusinessDetail(Long businessId, String businessCode, Long userId);
	
	/**
	 * @描述：分页查询用户业务办理记录
	 * @作者：田源
	 * @时间：2016年9月23日 下午3:59:29
	 * @param queryParam
	 * @param curPage
	 * @param numPerPage
	 * @return DBPage
	 */
	public DBPage queryPageByParams(DataRow queryParam, int curPage, int numPerPage);
	
	/**
	 * @描述：根据用户编号也业务实例编号查询业务实例数据
	 * @作者：刘恺
	 * @时间：2017年2月27日 下午1:59:14
	 * @param userId
	 * @param businessId
	 * @return
	 */
	public BusinessEntityModel queryByUserIdAndBusinessId(Long userId, Long businessId);
	
	public BusinessEntityModel querNotCompleteByUserIdAndBusinessCodeOrFlag(long userId, String businessCode, String flag);
	

    /**
     * 描述：根据业务类型标识查询业务名称
     * 作者：MIKE
     * @param business_code
     * @return
     * @throws Exception
     */
    public DataRow queryBusinessName(String business_code) throws Exception;
}
