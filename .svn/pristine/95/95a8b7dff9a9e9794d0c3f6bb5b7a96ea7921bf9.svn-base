//package com.thinkive.fxc.ismp.bus.business.tsgpzl.function;
//
//
//import org.apache.log4j.Logger;
//
//import com.thinkive.base.jdbc.DataRow;
//import com.thinkive.base.util.SpringHelper;
//import com.thinkive.base.util.StringHelper;
//import com.thinkive.fxc.ismp.bus.base.common.ISMPBaseFunction;
//import com.thinkive.server.InvokeException;
//import com.thinkive.server.ResultVo;
//
///**
// * 描述: 退市股票权限---业务办理完成确认
// * 版权: Copyright (c) 2010
// * 公司: 思迪科技 
// * 作者: 刘恺
// * 版本: 1.0 
// * 创建日期: 2014年11月20日 
// * 创建时间: 下午5:28:05
// */
//public class Function1004453 extends ISMPBaseFunction
//{
//	
//	private static Logger logger = Logger.getLogger(Function1004453.class);
//	
//	@Override
//	public ResultVo execute() throws Exception
//	{
//		ResultVo resultVo = new ResultVo();
//		String user_id = this.getStrParameter("user_id"); //用户ID
//		
//		checkInput();
//		AuthorityService authorityService = SpringHelper.getBean(Constants.SERVICE_ID_AUTHORITY, AuthorityService.class);
//		DataRow businessInfo = authorityService.queryTsgp(user_id);
//		if (businessInfo == null || businessInfo.isEmpty())
//		{
//			throw new InvokeException(getErrorNo(99), "根据用户id无法获取业务办理数据");
//		}
//		String state = businessInfo.getString("state");
//		if (!Constants.BUSINESS_STATE_DEALFAIL.equals(state) && !Constants.BUSINESS_STATE_DEALSUCCESS.equals(state))
//		{
//			throw new InvokeException(getErrorNo(98), "业务办理数据未处理完成，无法结束");
//		}
//		//修改业务表数据流程状态为前端已走完
//		DataRow updataData = new DataRow();
//		updataData.set("id", businessInfo.getString("id"));
//		updataData.set("iscomplete", Constants.BOL_TRUE);
//		authorityService.updateTsgpById(updataData);
//		resultVo.setErrorNo(Constants.INVOKE_FUNCTION_SUCCESS);
//		resultVo.setErrorMsg(Constants.INVOKE_FUNCTION_SUCCESSMSG);
//		return resultVo;
//	}
//	
//	private void checkInput() throws InvokeException
//	{
//		logger.info("入参：" + parametersToString());
//		if (StringHelper.isBlank(this.getStrParameter("user_id")))
//		{
//			throw new InvokeException(getErrorNo(1), "用户编号不能为空！");
//		}
//	}
//}
