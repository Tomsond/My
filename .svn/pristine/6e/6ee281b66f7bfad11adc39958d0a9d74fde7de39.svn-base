package com.thinkive.fxc.ismp.bus.base.business.utils;

import java.util.Map;

import com.thinkive.base.jdbc.DataRow;
import com.thinkive.base.util.SpringHelper;
import com.thinkive.fxc.ismp.bus.base.business.constants.BusinessServiceBeanIdConstants;
import com.thinkive.fxc.ismp.bus.base.business.service.SurveyOperationService;
import com.thinkive.fxc.ismp.bus.base.business.vo.UserInfoVo;

/**
 * @描述: 测评问卷模块化工具类
 * @版权: Copyright (c) 2010
 * @公司: 深圳市思迪信息技术股份有限公司
 * @作者: 刘恺
 * @版本: 2.0.0 
 * @创建时间: 2016年9月1日 下午11:59:01
 */
public class SurveyUtil
{
	
	private static SurveyOperationService surveyOperationService = SpringHelper.getBean(BusinessServiceBeanIdConstants.SERVICE_ID_SURVEYOPERATION, SurveyOperationService.class);
	
	/**
	 * @描述：检测测评是否通过
	 * @作者：刘恺
	 * @时间：2016年9月1日 下午11:59:21
	 * @param answerStr
	 * @param userInfo
	 * @param surveyNodeProperty
	 * @return
	 * @throws Exception
	 */
	@Deprecated
	public static DataRow surveyCheck(String answerStr, UserInfoVo userInfo, Map<String, String> surveyNodeProperty) throws Exception
	{
		return surveyOperationService.surveyCheck(answerStr, userInfo, surveyNodeProperty);
	}
	
	/**
	 * @描述：校验用户答案，如果用户通过问卷测评，则保存用户答案
	 * @作者：刘恺
	 * @时间：2016年9月2日 上午12:13:07
	 * @param answerStr
	 * @param userInfo
	 * @param surveyNodeProperty
	 * @param businessId
	 * @param submitNodeId
	 * @return
	 * @throws Exception
	 */
	@Deprecated
	public static DataRow surveyCheckAndSave(String answerStr, UserInfoVo userInfo, Map<String, String> surveyNodeProperty, Long businessId, String submitNodeId) throws Exception
	{
		return surveyOperationService.surveyCheckAndSave(answerStr, userInfo, surveyNodeProperty, businessId, submitNodeId);
	}
	
	/**
	 * @描述：校验用户答案，如果用户通过，新建业务实例，并存储用户答案
	 * @作者：刘恺
	 * @时间：2016年9月2日 上午12:13:07
	 * @param answerStr
	 * @param userInfo
	 * @param surveyNodeProperty
	 * @param businessId
	 * @param submitNodeId
	 * @return
	 * @throws Exception
	 */
	@Deprecated
	public static Map<String, Object> surveyCheckAndCreateBusinessAndSave(String answerStr, UserInfoVo userInfo, Map<String, String> surveyNodeProperty, Long businessId, String submitNodeId)
			throws Exception
	{
		return surveyOperationService.surveyCheckAndCreateBusinessAndSave(answerStr, userInfo, surveyNodeProperty, businessId, submitNodeId);
	}
	
	/**
	 * @描述：自动校验用户问卷是否通过
	 * @作者：刘恺
	 * @时间：2016年8月28日 下午8:50:33
	 * @param userInfo
	 * @param surveyNodeProperty
	 * @return
	 * @throws Exception
	 */
	@Deprecated
	public static DataRow autoCheckSurvey(UserInfoVo userInfo, Map<String, String> surveyNodeProperty) throws Exception
	{
		return surveyOperationService.autoCheckSurvey(userInfo, surveyNodeProperty);
	}
	
	/**
	 * @描述：校验问卷答案是否通过
	 * @作者：刘恺
	 * @时间：2016年8月28日 下午7:38:15
	 * @param userInfo
	 * @param passGrades
	 * @param passValues
	 * @return
	 * @throws Exception
	 */
	public static DataRow checkAnswerPass(DataRow questionResult, String passGrades, String passValues) throws Exception
	{
		
		return surveyOperationService.checkAnswerPass(questionResult, passGrades, passValues);
	}
	
	/**
	 * @描述：校验问卷等级是否通过
	 * @作者：刘恺
	 * @时间：2016年8月28日 下午7:40:35
	 * @param questionResult
	 * @param passGrades 逗号分割多重等级
	 * @return
	 */
	@Deprecated
	public static boolean checkSurveyGrade(DataRow questionResult, String passGrades)
	{
		return surveyOperationService.checkSurveyGrade(questionResult, passGrades);
	}
	
	/**
	 * @描述：校验问卷分数是否通过
	 * @作者：刘恺
	 * @时间：2016年8月28日 下午7:40:35
	 * @param questionResult
	 * @param passValues 20,89|90,100
	 * @return
	 */
	@Deprecated
	public static boolean checkSurveyValue(DataRow questionResult, String passValues)
	{
		return surveyOperationService.checkSurveyValue(questionResult, passValues);
	}
	
	/**
	 * @描述：保存用户答案
	 * @作者：刘恺
	 * @时间：2016年9月2日 上午12:12:09
	 * @param answerStr
	 * @param surveyNodeProperty
	 * @param businessId
	 * @param submitNodeId
	 * @param checkResult
	 * @throws Exception
	 */
	@Deprecated
	public static void saveUserAnswer(String answerStr, Map<String, String> surveyNodeProperty, Long businessId, String submitNodeId, DataRow checkResult) throws Exception
	{
		surveyOperationService.saveUserAnswer(answerStr, surveyNodeProperty, businessId, submitNodeId, checkResult);
	}
	
}
