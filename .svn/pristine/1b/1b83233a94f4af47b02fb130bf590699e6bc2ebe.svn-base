package com.thinkive.fxc.ismp.bus.business.increaseAccount.function;

import com.thinkive.base.util.SpringHelper;
import com.thinkive.fxc.ismp.bus.base.business.function.IsmpFlowBaseFunction;
import com.thinkive.fxc.ismp.bus.base.constants.DictionaryConstants;
import com.thinkive.fxc.ismp.bus.business.increaseAccount.constants.ZkConstants;
import com.thinkive.fxc.ismp.bus.business.increaseAccount.model.ZkExtendModel;
import com.thinkive.fxc.ismp.bus.business.increaseAccount.service.ZkService;
import com.thinkive.server.InvokeException;
import com.thinkive.server.ResultVo;

/**
 * @描述: 增开---提交补充信息
 * @版权: Copyright (c) 2010
 * @公司: 深圳市思迪信息技术股份有限公司
 * @作者: 刘恺
 * @版本: 2.0.0 
 * @创建时间: 2017年3月24日 上午10:34:48
 */
public class Function1004312 extends IsmpFlowBaseFunction
{
	
	private ZkExtendModel zkExtendModel;
	
	@Override
	public ResultVo execute() throws InvokeException, Exception
	{
		initVar();
		Long businessId = businessEntityAndConfigVO.getId();
		zkExtendModel.setBusinessId(businessId);
		ZkService hfZkService = SpringHelper.getBean(ZkConstants.SERVICE_ID_ZK, ZkService.class);
		hfZkService.addOrUpdateZkExtendModel(zkExtendModel);
		resultVo.setErrorNo(DictionaryConstants.INVOKE_FUNCTION_SUCCESS);
		resultVo.setErrorMsg(DictionaryConstants.INVOKE_FUNCTION_SUCCESSMSG);
		return resultVo;
	}
	
	/**
	 * @描述：获取业务入参
	 * @作者：刘恺
	 * @时间：2016年8月23日 下午8:55:24
	 */
	private void initVar()
	{
		zkExtendModel = new ZkExtendModel();
		String occupation = this.getAndCheckBlankStrParam("occupation", ZkConstants.BLANK_EMERGENCY_OCCUPATION);
		String education = this.getAndCheckBlankStrParam("education", ZkConstants.BLANK_EMERGENCY_EDUCATION);
		String address = this.getAndCheckBlankStrParam("address", ZkConstants.BLANK_EMERGENCY_ADDRESS);
		String postcode = this.getAndCheckBlankStrParam("postcode", ZkConstants.BLANK_EMERGENCY_POSTCODE);
		zkExtendModel.setOccupation(occupation);
		zkExtendModel.setEducation(education);
		zkExtendModel.setAddress(address);
		zkExtendModel.setPostcode(postcode);
	}
}
