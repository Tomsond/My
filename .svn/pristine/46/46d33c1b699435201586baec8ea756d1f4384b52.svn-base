package com.thinkive.fxc.ismp.bus.business.dzhtqs.function;

import java.util.List;

import com.thinkive.base.jdbc.DataRow;
import com.thinkive.base.util.SpringHelper;
import com.thinkive.fxc.ismp.bus.base.business.constants.BusinessServiceBeanIdConstants;
import com.thinkive.fxc.ismp.bus.base.business.service.UserInfoService;
import com.thinkive.fxc.ismp.bus.base.business.vo.UserInfoVo;
import com.thinkive.fxc.ismp.bus.base.common.ISMPBaseFunction;
import com.thinkive.fxc.ismp.bus.third.constants.ThirdDictionaryConstants;
import com.thinkive.fxc.ismp.bus.third.constants.ThirdInterfaceConstant;
import com.thinkive.fxc.ismp.bus.third.service.ThirdInterface;
import com.thinkive.server.InvokeException;
import com.thinkive.server.ResultVo;

//查询所有基金公司
public class Function1005004 extends ISMPBaseFunction
{
    private ThirdInterface thirdInterface;
    @Override
    public ResultVo execute() throws InvokeException, Exception
    {
        String prodta_no=this.getStrParameter("prodta_no");
        
      //查询所有基金公司
        UserInfoService userInfoService = SpringHelper.getBean(BusinessServiceBeanIdConstants.SERVICE_ID_USERINFO, UserInfoService.class);
        UserInfoVo userInfoVo = userInfoService.queryAndCheckUserByUserIdAndType(userId, ThirdInterfaceConstant.USER_ACCOUNT_TYPE_ZQ);
        
        DataRow thirdInput = new DataRow();
        thirdInput.set("client_id", userInfoVo.getClientId()); 
        thirdInput.set("fund_account", userInfoVo.getFundAccount());
        thirdInput.set("prodta_no", prodta_no);
        thirdInterface = SpringHelper.getBean(ThirdDictionaryConstants.SERVICE_ID_THIRDINTERFACE, ThirdInterface.class);
        ResultVo vo = new ResultVo();
        try
        {
           List list=thirdInterface.queryFundCompanyOrCode(thirdInput);
           
           vo.setResult(list);
        }
        catch (Exception e)
        {
            logger.info("错误信息："+e);
            throw new InvokeException(-100500401, e+"");
            
        }
       
        return vo;
    }
    
}
