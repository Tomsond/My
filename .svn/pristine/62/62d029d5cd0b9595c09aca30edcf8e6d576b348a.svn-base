/**
 * 
 */
package com.thinkive.fxc.ismp.bus.business.khzzhf.dao.impl;

import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import com.thinkive.base.jdbc.DataRow;
import com.thinkive.base.jdbc.session.Session;
import com.thinkive.base.util.StringUtil;
import com.thinkive.fxc.ismp.bus.base.basicdata.contants.BaseTableConstants;
import com.thinkive.fxc.ismp.bus.base.basicdata.model.SurveyAnswerModel;
import com.thinkive.fxc.ismp.bus.base.business.constants.BusinessTableConstants;
import com.thinkive.fxc.ismp.bus.base.business.dao.SurveyAnswerRecordDao;
import com.thinkive.fxc.ismp.bus.base.business.model.SurveyAnswerRecordModel;
import com.thinkive.fxc.ismp.bus.base.common.ISMPBaseDao;
import com.thinkive.fxc.ismp.bus.base.constants.SystemConstants;
import com.thinkive.fxc.ismp.bus.base.util.ModelUtil;
import com.thinkive.fxc.ismp.bus.business.khzzhf.dao.VisitSurveyRecordDao;
import com.thinkive.fxc.ismp.bus.business.khzzhf.model.VisitSurveyRecordModel;

/**
 * @描述: 回访问卷答案记录表(t_ismp_visit_survey_record)数据层实现类
 * @版权: Copyright (c) 2016 
 * @公司: 深圳市思迪信息技术股份有限公司
 * @作者: 尹杰民
 * @版本: 2.0 
 * @创建时间: 2016年8月16日 上午10:58:03
 */
public class VisitSurveyRecordDaoImpl extends ISMPBaseDao implements VisitSurveyRecordDao
{
	
	
	@Override
	public void deleteByBusinessId(Long businessId, String nodeId, Session session) throws Exception
	{
		StringBuilder sql = new StringBuilder("DELETE FROM ");
		sql.append(BusinessTableConstants.T_ISMP_VISIT_SURVEY_RECORD);
		sql.append(" WHERE BUSINESS_ID = ? AND NODE_ID = ? ");
		session.update(sql.toString(), new Object[] { businessId, nodeId });
	}

	@Override
    public VisitSurveyRecordModel add(VisitSurveyRecordModel visitSurveyRecordModel)
    {
        String id = getSeqValue(SystemConstants.DB_ISMP,BusinessTableConstants.T_ISMP_VISIT_SURVEY_RECORD);
        visitSurveyRecordModel.setId(Long.valueOf(id));
        visitSurveyRecordModel.setCreateDate(new Date());
        this.getJdbcTemplate().insert(BusinessTableConstants.T_ISMP_VISIT_SURVEY_RECORD, visitSurveyRecordModel);
        return visitSurveyRecordModel;
    }
	
}
