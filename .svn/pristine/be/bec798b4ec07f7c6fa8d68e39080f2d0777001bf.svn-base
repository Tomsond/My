//package com.thinkive.fxc.ismp.bus.third.service.impl.jz;
//
//import java.util.ArrayList;
//import java.util.LinkedHashMap;
//import java.util.List;
//import java.util.Map;
//import java.util.Map.Entry;
//
//import org.apache.commons.lang.StringUtils;
//
//import com.thinkive.base.config.Configuration;
//import com.thinkive.base.exception.BusinessException;
//import com.thinkive.base.jdbc.DataRow;
//import com.thinkive.base.util.SpringHelper;
//import com.thinkive.base.util.StringHelper;
//import com.thinkive.fxc.ismp.bus.base.basicdata.contants.BasicServiceBeanIdConstants;
//import com.thinkive.fxc.ismp.bus.base.basicdata.model.BranchExtinfoModel;
//import com.thinkive.fxc.ismp.bus.base.basicdata.service.BranchInfoService;
//import com.thinkive.fxc.ismp.bus.base.basicdata.service.TradeTimeService;
//import com.thinkive.fxc.ismp.bus.base.business.constants.BusinessServiceBeanIdConstants;
//import com.thinkive.fxc.ismp.bus.base.business.model.UserExtendModel;
//import com.thinkive.fxc.ismp.bus.base.business.service.UserInfoService;
//import com.thinkive.fxc.ismp.bus.base.constants.DictionaryConstants;
//import com.thinkive.fxc.ismp.bus.base.constants.SystemConstants;
//import com.thinkive.fxc.ismp.bus.base.util.ModelUtil;
//import com.thinkive.fxc.ismp.bus.business.otc.model.OtcInfo;
//import com.thinkive.fxc.ismp.bus.third.constants.StockEnum;
//import com.thinkive.fxc.ismp.bus.third.constants.ThirdInterfaceConstant;
//import com.thinkive.fxc.ismp.bus.third.constants.ThirdTBASConstants;
//import com.thinkive.fxc.ismp.bus.third.service.ThirdInterface;
//import com.thinkive.gateway.v2.client.Client;
//import com.thinkive.gateway.v2.result.Result;
//import com.thinkive.server.InvokeException;
//
///**
// * @描述: 第三方接口实现类
// * @版权: Copyright (c) 2010
// * @公司: 深圳市思迪信息技术股份有限公司
// * @作者: 田源
// * @版本: 2.0.0 
// * @创建时间: 2016年8月23日 下午2:29:17
// */
//public class ThirdInterfaceImpl implements ThirdInterface
//{
//	
//	/**
//	 * @描述：根据功能号和入参查询第三方Bus并返回数据
//	 * @作者：田源
//	 * @时间：2016年8月23日 下午10:34:19
//	 * @param funcNo
//	 * @param thirdInput
//	 * @return
//	 * @throws InvokeException
//	 */
//	@SuppressWarnings("deprecation")
//	private Result getThirdResult(int funcNo, DataRow thirdInput) throws InvokeException
//	{
//		Client client = new Client(SystemConstants.THIRD_BUS);
//		Result result = client.getResult(funcNo, thirdInput);
//		int errorNo = result.getErr_no();
//		if (errorNo != 0)
//		{
//			throw new InvokeException(errorNo, result.getErr_info());
//		}
//		return result;
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> getBingingBankCards(DataRow thirdInput)
//	{
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYHIRDBANK, thirdInput);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outPutList = new ArrayList<DataRow>();
//		if (resultList != null && resultList.size() != 0)
//		{
//			for (int i = 0; i < resultList.size(); i++)
//			{
//				DataRow item = resultList.get(i);
//				DataRow outItem = new DataRow();
//				outItem.set("bank_code", item.getString("banktype")); //银行机构号
//				outItem.set("account", item.getString("bankcode")); //银行卡号
//				outItem.set("is_main_card", item.getString("is_main_card"));
//				outItem.set("fund_account", item.getString("fund_account"));
//				outItem.set("money_type", item.getString("money_type"));
//				outItem.set("contract_status", item.getString("contract_status"));//签约状态[0C正常 1-待签约  2-冻结  3-挂失  4C销户]
//				outItem.set("bankToSecurity_flag", item.getString("bankToSecurity_flag")); //银行转证券密码标示 0-不需认证,1-资金密码,2-交易密码,3-外部机构账号密码
//				outItem.set("securityToBank_flag", item.getString("securityToBank_flag")); //证券转银行密码标示 0-不需认证,1-资金密码,2-交易密码,3-外部机构账号密码
//				outPutList.add(outItem);
//			}
//		}
//		return outPutList;
//	}
//	
//	@Override
//	public List<DataRow> getAssetInfo(DataRow thirdInput)
//	{
//		String account_type = thirdInput.getString("account_type");
//		List<DataRow> outList = new ArrayList<DataRow>();
//		if (ThirdInterfaceConstant.USER_ACCOUNT_TYPE_ZQ.equals(account_type))
//		{//查询证券资金帐号资产
//			List<DataRow> resultList = this.queryStockAsset(thirdInput);
//			for (DataRow resultData : resultList)
//			{
//				DataRow outPut = new DataRow();
//				outPut.set("fundbal", resultData.getString("account_balance")); //资金余额
//				outPut.set("fetch_balance", resultData.getString("fetch_balance")); //可取资金
//				outPut.set("stkvalue", resultData.getString("market_value")); //市值
//				outPut.set("marketvalue", resultData.getString("assert_val")); //资产总值
//				outPut.set("fund", resultData.getString("account_balance")); //资金资产
//				//				outPut.set("fetch_balance", resultData.getString("fund")); //可取资金
//				outPut.set("fund_account", resultData.getString("fund_account")); //资金账号    
//				outPut.set("moneytype", resultData.getString("moneytype")); //货币类型 0-人民币，1-港币， 2-美元
//				//				outPut.set("marketvalue", resultData.getString("market_value"));//市值
//				//				outPut.set("stkvalue", resultData.getString("marketvalue")); //市值
//				//				outPut.set("fundbal", resultData.getString("fundbal")); //资金余额
//				//				outPut.set("fund", resultData.getString("fund")); //资金资产
//				outPut.set("available_balance", resultData.getString("available_balance")); //可用资金
//				outPut.set("integral_balance", resultData.getString("integral_balance")); //利息积数
//				outPut.set("assure_secudis_balance", resultData.getString("assure_secudis_balance"));//证券担保折算资产 冲抵证券
//				outPut.set("interest_base", resultData.getString("interest_base")); //利息基数
//				outList.add(outPut);
//			}
//			return outList;
//		}
//		else if (ThirdInterfaceConstant.USER_ACCOUNT_TYPE_XY.equals(account_type))
//		{
//			List<DataRow> resultList = this.queryXYAsset(thirdInput);
//			for (DataRow resultData : resultList)
//			{
//				DataRow outPut = new DataRow();
//				outPut.set("fund_asset", resultData.getString("fund_asset")); //资金现金余额
//				outPut.set("fetch_balance", resultData.getString("fetch_balance")); //可取资金
//				outPut.set("stkvalue", resultData.getString("market_value")); //证券市值
//				outPut.set("marketvalue", resultData.getString("total_assert")); //资产总值
//				outPut.set("total_debt", resultData.getString("total_debt")); //总负债
//				outPut.set("net_asset", resultData.getString("net_asset")); //净资产=资产总值-总负债
//				outPut.set("fin_income", resultData.getString("fin_income")); //融资合约盈亏
//				outPut.set("slo_income", resultData.getString("slo_income")); //融券合约盈亏 说明：融资合约盈亏+融券合约盈亏
//				outPut.set("enable_bail_balance", resultData.getString("enable_bail_balance")); //可用保证金
//				outPut.set("used_bail_balance", resultData.getString("used_bail_balance")); //已用保证金
//				outPut.set("per_assurescale_value", resultData.getString("per_assurescale_value")); //个人维持担保比例
//				outPut.set("assure_secudis_balance", resultData.getString("assure_secudis_balance")); //证券担保折算资产  冲抵证券
//				outPut.set("fin_compact_balance", resultData.getString("fin_compact_balance")); //融资合约金额
//				outPut.set("fin_compact_fare", resultData.getString("fin_compact_fare")); //融资合约费用
//				outPut.set("fin_compact_interest", resultData.getString("fin_compact_interest")); //融资合约利息
//				outPut.set("fin_market_value", resultData.getString("fin_market_value")); //融资市值
//				outPut.set("slo_compact_balance", resultData.getString("slo_compact_balance")); //融券合约金额
//				outPut.set("slo_compact_fare", resultData.getString("slo_compact_fare")); //融券合约费用
//				outPut.set("slo_compact_interest", resultData.getString("slo_compact_interest")); //融券合约利息
//				outPut.set("slo_market_value", resultData.getString("slo_market_value")); //融券市值
//				outList.add(outPut);
//			}
//			return outList;
//		}
//		return outList;
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> queryXYAsset(DataRow thirdInput)
//	{
//		thirdInput.set("moneytype", thirdInput.getString("moneytype")); //货币类型
//		thirdInput.set("showDetail", thirdInput.getString("showDetail"));//显示资产明细
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYXYASSET, thirdInput);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outList = new ArrayList<DataRow>();
//		for (DataRow resultData : resultList)
//		{
//			DataRow outputData = new DataRow();
//			outputData.set("client_id", resultData.getString("client_id"));
//			outputData.set("fetch_balance", resultData.getString("fetch_balance"));//可取金额
//			outputData.set("fetch_balance", resultData.getString("fetch_balance")); //可取金额
//			outputData.set("fund_asset", resultData.getString("fund_asset")); //资金现金资产
//			outputData.set("market_value", resultData.getString("market_value")); //证券市值
//			outputData.set("total_assert", resultData.getString("total_assert")); //资产总值
//			outputData.set("total_debt", resultData.getString("total_debt")); //总负债
//			outputData.set("net_asset", resultData.getString("net_asset")); //净资产=资产总值-总负债
//			outputData.set("fin_income", resultData.getString("fin_income")); //融资合约盈亏
//			outputData.set("slo_income", resultData.getString("slo_income")); //融资合约盈亏 说明：融资合约盈亏+融券合约盈亏
//			outputData.set("enable_bail_balance", resultData.getString("enable_bail_balance")); //可用保证金
//			outputData.set("used_bail_balance", resultData.getString("used_bail_balance")); //已用保证金
//			outputData.set("per_assurescale_value", resultData.getString("per_assurescale_value")); //个人维持担保比例
//			outputData.set("assure_secudis_balance", resultData.getString("assure_secudis_balance")); //证券担保折算资产  冲抵证券
//			outputData.set("fin_compact_balance", resultData.getString("fin_compact_balance")); //融资合约金额
//			outputData.set("fin_compact_fare", resultData.getString("fin_compact_fare")); //融资合约费用
//			outputData.set("fin_compact_interest", resultData.getString("fin_compact_interest")); //融资合约利息
//			outputData.set("fin_market_value", resultData.getString("fin_market_value")); //融资市值
//			outputData.set("slo_compact_balance", resultData.getString("slo_compact_balance")); //融券合约金额
//			outputData.set("slo_compact_fare", resultData.getString("slo_compact_fare")); //融券合约费用
//			outputData.set("slo_compact_interest", resultData.getString("slo_compact_interest")); //融券合约利息
//			outputData.set("slo_market_value", resultData.getString("slo_market_value")); //融券市值
//			
//			outList.add(outputData);
//		}
//		return outList;
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> queryStockAsset(DataRow input)
//	{
//		input.set("moneytype", input.getString("moneytype")); //货币类型
//		input.set("showDetail", input.getString("showDetail"));//显示资产明细
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYSTOCKASSET, input);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outList = new ArrayList<DataRow>();
//		for (DataRow resultData : resultList)
//		{
//			DataRow outputData = new DataRow();
//			outputData.set("client_id", resultData.getString("client_id"));
//			outputData.set("fund_account", resultData.getString("fund_account")); //资金账号
//			outputData.set("moneytype", resultData.getString("moneytype")); //货币类型 0-人民币，1-港币， 2-美元
//			outputData.set("account_balance", resultData.getString("account_balance")); //资金余额
//			outputData.set("available_balance", resultData.getString("available_balance")); //可用资金
//			outputData.set("assert_val", resultData.getString("assert_val")); //资产总值
//			outputData.set("market_value", resultData.getString("marketvalue")); //市值
//			outputData.set("fetch_balance", resultData.getString("fundbal")); //可取资金
//			outputData.set("integral_balance", resultData.getString("integral_balance")); //利息积数
//			outputData.set("assure_secudis_balance", resultData.getString("assure_secudis_balance"));//证券担保折算资产 冲抵证券
//			outputData.set("interest_base", resultData.getString("interest_base")); //利息基数
//			outList.add(outputData);
//		}
//		return outList;
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> queryRegistAccount(DataRow input)
//	{
//		if (!StringHelper.isBlank(input.getString("trdacct_type")))
//		{
//			input.set("trdacct_type", input.getString("trdacct_type"));
//		}
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYREGISTACCOUNT, input);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outPutList = new ArrayList<DataRow>();
//		if (resultList != null && resultList.size() != 0)
//		{
//			for (int i = 0; i < resultList.size(); i++)
//			{
//				DataRow item = resultList.get(i);
//				DataRow outItem = new DataRow();
//				outItem.set("client_id", item.getString("client_id")); //客户号
//				outItem.set("trdacct", item.getString("trdacct")); //证券账号
//				outItem.set("trdacct_type", item.getString("trdacct_type")); //账号类型【11-沪A,13-沪基金，14-沪信用，21-深A,23-深基金，24-深信用】
//				outItem.set("state", item.getString("trdacct_status"));//证券账户状态【0-正常,1-挂失,2-冻结,3-休眠,4-注销】
//				outItem.set("treg_status", item.getString("treg_status")); //沪A的指定状态
//				outItem.set("ymt_code", item.getString("ymt_code")); //一码通
//				StockEnum stockEnum = StockEnum.getEnumByTrdaccType(item.getString("trdacct_type"));
//				outItem.set("stkbd", "");
//				outItem.set("trdacct_excls", "");
//				if (stockEnum != null)
//				{
//					outItem.set("stkbd", stockEnum.getStkbd());
//					outItem.set("trdacct_excls", stockEnum.getCls());
//				}
//				outItem.set("bind_state", "1");
//				//如果是沪A，判断指定状态
//				if (ThirdTBASConstants.STKBD_TYPE_HAG.equals(outItem.getString("trdacct_type")))
//				{
//					String hAState = ThirdTBASConstants.GTHAACCOUNTSTATE_TO_TRDACCOUNTSTATE.get(outItem.getString("treg_status"));
//					outItem.set("bind_state", hAState);
//				}
//				
//				//如果是深A，判断指定状态
//				if (ThirdTBASConstants.STKBD_TYPE_SAG.equals(outItem.getString("trdacct_type")))
//				{
//					String hAState = ThirdTBASConstants.GTHAACCOUNTSTATE_TO_TRDACCOUNTSTATE.get(outItem.getString("treg_status"));
//					outItem.set("bind_state", hAState);
//				}
//				outItem.set("zjacc_type", ThirdInterfaceConstant.ACCOUNT_TRDACCT.get(item.getString("trdacct_excls")));
//				outPutList.add(outItem);
//			}
//		}
//		return outPutList;
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> queryZdAccount(DataRow input)
//	{
//		input.set("idtype", input.getString("identity_type"));
//		input.set("idno", input.getString("identity_num"));
//		if (!StringHelper.isBlank(input.getString("trdacct_type")))
//		{
//			input.set("trdacct_type", input.getString("trdacct_type"));
//		}
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYZDACCOUNT, input);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outPutList = new ArrayList<DataRow>();
//		if (resultList != null && resultList.size() != 0)
//		{
//			for (int i = 0; i < resultList.size(); i++)
//			{
//				DataRow item = resultList.get(i);
//				DataRow outItem = new DataRow();
//				outItem.set("client_id", item.getString("client_id")); //客户号
//				outItem.set("trdacct", item.getString("trdacct")); //证券账号
//				outItem.set("trdacct_type", item.getString("trdacct_type")); //账号类型【11-沪A,13-沪基金，14-沪信用，21-深A,23-深基金，24-深信用】
//				outItem.set("stkbd", "");
//				outItem.set("trdacct_excls", "");
//				StockEnum stockEnum = StockEnum.getEnumByTrdaccType(item.getString("trdacct_type"));
//				if (stockEnum != null)
//				{
//					outItem.set("stkbd", stockEnum.getStkbd());
//					outItem.set("trdacct_excls", stockEnum.getCls());
//				}
//				outItem.set("state", item.getString("trdacct_status"));//证券账户状态【0-正常,1-挂失,2-冻结,3-休眠,4-注销】
//				outItem.set("custname", item.getString("custname")); //客户姓名
//				outItem.set("idtype", item.getString("idtype")); //证件类型
//				outItem.set("idno", item.getString("idno")); //证件号码
//				outItem.set("ymt_code", item.getString("ymt_code")); //一码通号
//				outItem.set("open_date", item.getString("open_date")); //开户日期
//				outItem.set("glbs", item.getString("glbs")); //关联标示
//				outItem.set("gljgmc", item.getString("gljgmc")); //关联机构名称
//				outItem.set("treg_status", item.getString("treg_status")); //沪A的指定状态
//				outItem.set("ymt_code", item.getString("ymt_code")); //一码通
//				outItem.set("bind_state", "");
//				outItem.set("zjacc_type", ThirdInterfaceConstant.ACCOUNT_TRDACCT.get(item.getString("trdacct_excls")));
//				outPutList.add(outItem);
//			}
//		}
//		return outPutList;
//	}
//	
//	@Override
//	public Double getTwentyDayAverageAssets(DataRow thirdInput)
//	{
//		//TODO 查询20日内日均资产接口接口未实现
//		return null;
//	}
//	
//	@Override
//	public DataRow getFirstTransactionDate(DataRow input)
//	{
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_FIRSTTRDDATE, input);
//		DataRow resultData = result.getData();
//		DataRow output = new DataRow();
//		if (resultData != null)
//		{
//			output.set("firsTransactionDate", resultData.getString("first_trdDate")); //首次交易日 YYYYMMDD,没有返回空串
//		}
//		
//		return output;
//	}
//	
//	@Override
//	public DataRow getQuestionnaire(DataRow input)
//	{
//		input.set("paper_type", input.getString("survey_sn"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYEFXCP, input);
//		DataRow resultData = result.getData();
//		DataRow outPutData = new DataRow();
//		outPutData.set("risklevel", resultData.getString("risk_level"));
//		outPutData.set("subitemname", resultData.getString("risk_level_name"));
//		outPutData.set("riskvalue", resultData.getString("paper_score"));
//		outPutData.set("status", resultData.getString("risk_isEffective"));
//		outPutData.set("risk_end_date", resultData.getString("risk_end_date"));
//		outPutData.set("upddate", resultData.getString("upddate"));
//		return outPutData;
//	}
//	
//	@Override
//	public DataRow addOrUpdateQuestionnaire(DataRow input)
//	{
//		String answer = input.getString("answer");
//		Map<String, String> answerMap = new LinkedHashMap<String, String>();
//		if (!StringHelper.isBlank(answer))
//		{
//			String[] questionAnsArr = answer.split("\\|");
//			for (String item : questionAnsArr)
//			{
//				String[] questionAnsScore = item.split("_");
//				String qid = questionAnsScore[0];
//				String and = questionAnsScore[1];
//				String hasQuestion = answerMap.get(qid);
//				if (StringHelper.isBlank(hasQuestion))
//				{
//					answerMap.put(qid, item);
//					continue;
//				}
//				hasQuestion = hasQuestion.replace(qid + "_", qid + "_" + and + "&");
//				answerMap.put(qid, hasQuestion);
//			}
//			StringBuilder newAnswer = new StringBuilder();
//			for (Entry<String, String> item : answerMap.entrySet())
//			{
//				newAnswer.append(item.getValue());
//				newAnswer.append("|");
//			}
//			answer = newAnswer.toString();
//			answer = answer.substring(0, answer.length() - 1);
//		}
//		input.set("paper_answers", answer); //答案
//		input.set("paper_type", input.getString("survey_sn")); //试卷类型[1-个人风险测评]
//		input.set("riskValue", input.getString("riskValue")); //机构代码 营业部
//		input.set("name", input.getString("name"));
//		input.set("identity_type", input.getString("identity_type"));
//		input.set("identity_num", input.getString("identity_num"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_SUBMITFXCP, input);
//		DataRow resultData = result.getData();
//		DataRow outPutData = new DataRow();
//		outPutData.set("risklevel", resultData.getString("risk_level"));
//		outPutData.set("subitemname", resultData.getString("risk_level_name"));
//		outPutData.set("riskvalue", resultData.getString("paper_score"));
//		return outPutData;
//	}
//	
//	@Override
//	public DataRow accountBindBankCard(DataRow input)
//	{
//		input.set("banktype", input.getString("bank_code")); //银行卡机构号
//		input.set("bankcode", input.getString("card_num")); //银行卡卡号
//		input.set("bankpwd", input.getString("card_password"));//银行卡银行密码
//		input.set("bindtype", input.getString("bindtype")); //绑定方式 1-一步式 2-两步式
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_BINDTHIRDBANK, input);
//		DataRow resultData = result.getData();
//		DataRow outputData = new DataRow();
//		outputData.set("flag", resultData.getBoolean("flag")); //true-绑定成功；false-绑定失败
//		outputData.set("message", resultData.getString("message")); //绑定结果说明
//		return outputData;
//	}
//	
//	@Override
//	public String hasTodayWt(DataRow input)
//	{
//		input.set("fund_account", input.getString("op_account")); //就银行对应的资金密码
//		input.set("money_type", input.getString("money_type")); //货币类型
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_HASTODAYWY, input);
//		DataRow resultData = result.getData();
//		return resultData.getString("flag");
//	}
//	
//	@Override
//	public String hasBanktransFerflow(DataRow input)
//	{
//		input.set("fund_account", input.getString("op_account")); //就银行对应的资金密码
//		input.set("money_type", input.getString("money_type")); //货币类型
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_HASBANKTRANSFERFLOW, input);
//		DataRow resultData = result.getData();
//		return resultData.getString("flag");
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> queryBankTransferFlow(DataRow thirdInput)
//	{
//		thirdInput.set("count", thirdInput.getString("count"));//请求数量
//		thirdInput.set("strdate", thirdInput.getString("strdate"));//开始日期
//		thirdInput.set("enddate", thirdInput.getString("enddate"));//结束日期
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYBANKTRANSFERFLOW, thirdInput);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outputList = new ArrayList<DataRow>();
//		for (int i = 0; i < resultList.size(); i++)
//		{
//			DataRow resultItem = (DataRow) resultList.get(i);
//			DataRow outputItem = new DataRow();
//			outputItem.set("client_id", resultItem.getString("client_id"));//客户号
//			outputItem.set("fund_account", resultItem.getString("fund_account"));//资金账号
//			outputItem.set("bank_name", resultItem.getString("bank_name"));//银行名称
//			outputItem.set("banktype", resultItem.getString("banktype"));//银行代码
//			outputItem.set("entrust_time", resultItem.getString("entrust_time"));//委托时间
//			outputItem.set("entrust_status", resultItem.getString("entrust_status"));//委托状态（数据字典）
//			outputItem.set("entrust_error_info", resultItem.getString("entrust_error_info"));//废单原因+银行错误信息
//			outputItem.set("transfer_balance", resultItem.getString("transfer_balance"));//交易金额
//			outputItem.set("transfer_info", resultItem.getString("transfer_info"));//交易类型描述
//			outputItem.set("transfer_type", resultItem.getString("transfer_type"));//交易类型
//			outputList.add(outputItem);
//		}
//		return outputList;
//	}
//	
//	@Override
//	public String hasZtBusiness(DataRow thirdInput)
//	{
//		thirdInput.set("fund_account", thirdInput.getString("op_account")); //就银行对应的资金密码
//		thirdInput.set("money_type", thirdInput.getString("money_type")); //货币类型
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_HASZTBUSINESS, thirdInput);
//		DataRow resultData = result.getData();
//		return resultData.getString("flag");
//	}
//	
//	@Override
//	public DataRow cancelAccountBindBankCard(DataRow input)
//	{
//		input.set("banktype", input.getString("bank_code")); //银行卡机构号
//		input.set("bankcode", input.getString("card_num")); //银行卡卡号
//		input.set("fundpwd", input.getString("zj_password")); //资金密码
//		input.set("fund_account", input.getString("op_account")); //就银行对应的资金密码
//		input.set("money_type", input.getString("money_type")); //货币类型
//		if (!StringHelper.isBlank(input.getString("card_password")))
//		{
//			input.set("bankpwd", input.getString("card_password"));//银行卡银行密码
//		}
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_CANCELBANK, input);
//		DataRow resultData = result.getData();
//		DataRow outputData = new DataRow();
//		outputData.set("flag", resultData.getBoolean("flag")); //true-销卡成功；false-销卡失败
//		outputData.set("message", resultData.getString("message")); //销卡结果说明
//		outputData.set("error_no", resultData.getString("error_no")); //错误编号
//		return outputData;
//	}
//	
//	@Override
//	public DataRow checkLogin(String account, String password, String loginType,String opStation)
//	{
//		DataRow input = new DataRow();
//		input.set("loginAccount", account); //资金帐号
//		input.set("loginPwd", password); //资金帐号密码
//		input.set("loginType", loginType); //登陆方式  默认 ，0：资金号登陆  1：股东卡 2：客户号
//		input.set("op_station", opStation);
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_LOGIN, input);
//		DataRow resultData = result.getData();
//		System.out.println(resultData);
//		DataRow output = new DataRow();
//		output.set("loginflag", Boolean.parseBoolean(result.getData().getString("flag"))); //登录结果
//		output.set("client_id", result.getData().getString("client_id")); //客户号
//		output.set("fund_account", result.getData().getString("fund_account")); //资金账号
//		output.set("custname", result.getData().getString("username")); //客户姓名
//		output.set("org_id", result.getData().getString("branchno")); //机构ID  营业部ID
//		output.set("error_no", result.getErr_no());
//		output.set("msg", result.getData().getString("msg"));
//		if (!StringHelper.isBlank(result.getErr_info()))
//		{
//			output.set("msg", result.getErr_info());
//		}
//		return output;
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> queryStockEntrustRecord(DataRow input)
//	{
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERY_STOCKENTRUSTRECORD, input);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outputList = new ArrayList<DataRow>();
//		for (int i = 0; i < resultList.size(); i++)
//		{
//			DataRow resultItem = (DataRow) resultList.get(i);
//			DataRow outputItem = new DataRow();
//			outputItem.set("trdacct", resultItem.getString("trdacct"));//证券账号
//			outputItem.set("stock_code", resultItem.getString("stock_code"));//股票代码
//			outputItem.set("entrust_price", resultItem.getString("entrust_price"));//委托价格
//			outputItem.set("ans_entrust_amountid", resultItem.getString("entrust_amount"));//委托数量
//			outputItem.set("business_amount", resultItem.getString("business_amount"));//成交数量
//			outputItem.set("business_price", resultItem.getString("business_price"));//成交价格
//			outputItem.set("entrust_date", resultItem.getString("entrust_date"));//委托日期
//			outputItem.set("entrust_time", resultItem.getString("entrust_time"));//委托时间
//			outputItem.set("stock_name", resultItem.getString("stock_name"));//证券名称
//			outputItem.set("business_type", resultItem.getString("business_type"));//交易类型  1买入，2卖出 
//			outputList.add(outputItem);
//		}
//		return outputList;
//	}
//	
//	@Override
//	public void jiexiBankCard(DataRow thirdInput)
//	{
//		thirdInput.set("fund_account", thirdInput.getString("op_account")); //操作的银行卡所属资金帐号
//		thirdInput.set("money_type", thirdInput.getString("money_type")); //货币类型
//		getThirdResult(ThirdTBASConstants.FUNCTION_NTERESTSETTLEMEN, thirdInput);
//	}
//	
//	@Override
//	public DataRow queryUserInfoByAccount(DataRow input) throws Exception
//	{
//		input.set("idno", input.getString("identity_num"));
//		input.set("custname", input.getString("name"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYUSERINFO, input);
//		DataRow resultData = result.getData();
//		DataRow output = new DataRow();
//		if (resultData != null && !resultData.isEmpty())
//		{
//			output.set("account", resultData.getString("fund_account"));//资金账号
//			output.set("identity_type", resultData.getString("idtype"));//证件类型
//			output.set("identity_num", resultData.getString("idno"));//证件号
//			output.set("name", resultData.getString("custname"));//姓名
//			output.set("nick_name", resultData.getString("nick_name"));//昵称
//			output.set("sex", resultData.getString("usersex"));//性别
//			output.set("birthday", resultData.getString("birthday"));//生日
//			output.set("mobile", resultData.getString("mobileno"));//手机号码
//			output.set("email", resultData.getString("email"));//电子邮箱
//			output.set("telephone", resultData.getString("telephone"));//联系电话
//			output.set("address", resultData.getString("addr"));//联系地址
//			output.set("post_code", resultData.getString("postid"));//邮政编码
//			output.set("country", resultData.getString("nationality"));//156表示国籍：中国
//			output.set("sign_office", resultData.getString("policeorg"));//签发机关
//			output.set("papers_addr", resultData.getString("id_addr"));//证件地址
//			output.set("validity_begin", resultData.getString("idbegindate"));//证件有效期开始
//			output.set("validity_end", resultData.getString("idenddate"));//证件有效期结束
//			output.set("occupational", resultData.getString("occupation"));//职业（1专业技术人员）
//			output.set("adapter", resultData.getString("edu"));//学历（2学士）
//			output.set("is_freeze", "0");//是否冻结(0正常，1冻结)
//			output.set("client_id", resultData.getString("client_id"));
//			output.set("branch_no", resultData.getString("branchno"));
//			output.set("org_id", resultData.getString("branchno"));
//			output.set("emergency_name", resultData.getString("emergency_name"));
//			output.set("emergency_mobile", resultData.getString("emergency_mobile"));
//			output.set("emergency_relation", resultData.getString("emergency_relation"));
//		}
//		return output;
//	}
//	
//	@Override
//	public DataRow getEntrustOpenInfo(DataRow input) throws Exception
//	{
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYENTRUST, input);
//		DataRow resultData = result.getData();
//		String operway = resultData.getString("entrustWay");
//		char[] operwayArr = operway.toCharArray();
//		DataRow outPutData = new DataRow();
//		List<String> outputList = new ArrayList<String>();
//		for (int i = 0; i < operwayArr.length; i++)
//		{
//			char operwayItem = operwayArr[i];
//			outputList.add(String.valueOf(operwayItem));
//		}
//		outPutData.set("entrustString", operway);
//		outPutData.set("entrustList", outputList);
//		return outPutData;
//	}
//	
//	@Override
//	public DataRow ChangeEntrust(DataRow input) throws Exception
//	{
//		input.set("entrustWay", input.getString("entrustWay"));//委托方式串
//		input.set("business_type", input.getString("business_type"));//委托方式串
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_UPDATEENTRUST, input);
//		DataRow resultData = result.getData();
//		String operway = resultData.getString("operway");
//		char[] operwayArr = operway.toCharArray();
//		DataRow outPutData = new DataRow();
//		List<String> outputList = new ArrayList<String>();
//		for (int i = 0; i < operwayArr.length; i++)
//		{
//			char operwayItem = operwayArr[i];
//			outputList.add(String.valueOf(operwayItem));
//		}
//		outPutData.set("entrustString", operway);
//		outPutData.set("entrustList", outputList);
//		return outPutData;
//	}
//	
//	@Override
//	public DataRow closeEntrust(DataRow dr) throws Exception
//	{
//		// TODO Auto-generated method stub
//		return null;
//	}
//	
//	@Override
//	public DataRow updateUserInfo(DataRow input) throws Exception
//	{
//		input.set("idno", input.getString("identity_num"));
//		input.set("idtype", input.getString("identity_type"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_UPDATEUSERINFO, input);
//		return result.getData();
//	}
//	
//	@Override
//	public void updateContact(DataRow input)
//	{
//		String emergency_name = input.getString("emergency_name");
//		String emergency_relation = input.getString("emergency_relation");
//		String emergency_tel = input.getString("emergency_tel");
//		String emergency_mobile = input.getString("emergency_mobile");
//		String emergency_email = input.getString("emergency_email");
//		String emergency_address = input.getString("emergency_address");
//		String emergency_id = input.getString("emergency_id");
//		if (!StringHelper.isBlank(emergency_name))
//		{
//			input.set("linkman", emergency_name);
//		}
//		if (!StringHelper.isBlank(emergency_relation))
//		{
//			input.set("linkman_relation", emergency_relation);
//		}
//		if (!StringHelper.isBlank(emergency_tel))
//		{
//			input.set("linkman_tel", emergency_tel);
//		}
//		if (!StringHelper.isBlank(emergency_mobile))
//		{
//			input.set("linkman_mobile", emergency_mobile);
//		}
//		if (!StringHelper.isBlank(emergency_email))
//		{
//			input.set("linkman_email", emergency_email);
//		}
//		if (!StringHelper.isBlank(emergency_address))
//		{
//			input.set("linkman_addr", emergency_address);
//		}
//		if (!StringHelper.isBlank(emergency_id))
//		{
//			input.set("id", emergency_id);
//		}
//		getThirdResult(ThirdTBASConstants.FUNCTION_UPDATECONTACT, input);
//		
//	}
//	
//	@Override
//	public DataRow updateBusinessPwd(DataRow input)
//	{
//		input.set("new_password", input.getString("newpwd")); //新密码
//		input.set("password_type", "2"); //[1-资金密码，2-交易密码]
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_UPDATEPASSWORD, input);
//		DataRow outPutData = result.getData();
//		return outPutData;
//	}
//	
//	@Override
//	public DataRow updateZjPassword(DataRow input)
//	{
//		input.set("oldpwd", input.getString("oldpwd")); //旧密码
//		input.set("password", input.getString("oldpwd")); //旧密码
//		input.set("new_password", input.getString("newpwd")); //新密码
//		input.set("password_type", "1"); //[1-资金密码，2-交易密码]
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_UPDATECAPITALPASSWORD, input);
//		DataRow outPutData = result.getData();
//		return outPutData;
//	}
//	
//	@Override
//	public DataRow OprAccount(DataRow input) throws Exception
//	{
//		input.set("transfer_balance", input.getString("transfer_balance"));
//		input.set("bank_no", input.getString("bank_no"));//银行卡号
//		input.set("banktype", input.getString("banktype"));//银行卡号
//		input.set("transfer_balance", input.getString("transfer_balance"));//转账金额
//		input.set("money_type", input.getString("money_type"));//货币类型
//		input.set("transfer_type", input.getString("transfer_type"));//转账类型
//		input.set("bank_password", input.getString("bank_password"));//银行密码
//		input.set("fund_password", input.getString("fund_password"));//资金密码
//		getThirdResult(ThirdTBASConstants.FUNCTION_BANKTRANSFER, input);
//		DataRow output = new DataRow();
//		output.set("flag", DictionaryConstants.BOL_TRUE);
//		return output;
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> queryZJAccount(DataRow input)
//	{
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYZJACCOUNT, input);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outPutList = new ArrayList<DataRow>();
//		if (resultList != null && resultList.size() != 0)
//		{
//			for (int i = 0; i < resultList.size(); i++)
//			{
//				DataRow item = resultList.get(i);
//				DataRow outItem = new DataRow();
//				outItem.set("client_id", item.getString("client_id"));
//				outItem.set("bronch_no", item.getString("bronch_no")); //营业部
//				outItem.set("fund_account", item.getString("fund_account")); //资金帐号
//				outItem.set("main_flag", item.getString("main_flag")); //是否为住资金帐号  0：辅 1：主
//				outItem.set("fundacc_type", item.getString("fundacc_type")); //帐号类型
//				outItem.set("open_date", item.getString("open_date")); //开通日期
//				outPutList.add(outItem);
//			}
//		}
//		return outPutList;
//	}
//	
//	@Override
//	public DataRow signAgreement(DataRow input)
//	{
//		input.set("idtype", input.getString("identity_type"));
//		input.set("idno", input.getString("identity_num"));
//		getThirdResult(ThirdTBASConstants.FUNCTION_SIGNAGREEMENT, input);
//		DataRow outData = new DataRow();
//		outData.set("flag", true);
//		return outData;
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> queryAgreement(DataRow input)
//	{
//		input.set("idtype", input.getString("identity_type"));
//		input.set("idno", input.getString("identity_num"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYAGREEMENT, input);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outPutList = new ArrayList<DataRow>();
//		if (resultList != null && resultList.size() != 0)
//		{
//			for (int i = 0; i < resultList.size(); i++)
//			{
//				DataRow item = resultList.get(i);
//				DataRow outItem = new DataRow();
//				outItem.set("sign_flag", item.getString("sign_flag"));
//				outPutList.add(outItem);
//			}
//		}
//		return outPutList;
//	}
//	
//	@Override
//	public void openGznhg(DataRow input)
//	{
//		input.set("trdacct", input.getString("trdaccount"));
//		getThirdResult(ThirdTBASConstants.FUNCTION_OPENGZNHG, input);
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> queryAuthority(DataRow input)
//	{
//		input.set("trdacct_right", input.getString("agmt_type_str"));
//		input.set("trdacct", input.getString("trdaccount"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYAUTHORITY, input);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outList = new ArrayList<DataRow>();
//		for (DataRow resultData : resultList)
//		{
//			DataRow outPut = new DataRow();
//			outPut.set("fund_account", resultData.getString("fund_account")); //资金帐号
//			outPut.set("cust_agmt_type", resultData.getString("trdacct_right"));//股东号权限，多个用“,”分隔【】
//			outPut.set("trdacct_type", resultData.getString("trdacct_type")); //股东类型
//			StockEnum stockEnum = StockEnum.getEnumByTrdaccType(resultData.getString("trdacct_type"));
//			if (stockEnum != null)
//			{
//				outPut.set("stkbd", stockEnum.getStkbd()); //交易板块
//				outPut.set("trdacct_excls", stockEnum.getCls()); //交易板块
//			}
//			outPut.set("trdacct", resultData.getString("trdacct")); //交易账户
//			outList.add(outPut);
//		}
//		return outList;
//	}
//	
//	@Override
//	public void openFxjs(DataRow input)
//	{
//		input.set("trdacct", input.getString("trdaccount"));
//		input.set("trdacct_type", input.getString("trdacct_type"));
//		getThirdResult(ThirdTBASConstants.FUNCTION_OPENFXJS, input);
//	}
//	
//	@Override
//	public void openHgt(DataRow input)
//	{
//		input.set("trdacct", input.getString("trdaccount"));
//		getThirdResult(ThirdTBASConstants.FUNCTION_OPENHGT, input);
//	}
//	
//	@Override
//	public DataRow queryGGTAccount(DataRow input)
//	{
//		input.set("trdacct", input.getString("trdaccount"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYGGT, input);
//		DataRow resultData = result.getData();
//		DataRow outputData = new DataRow();
//		outputData.set("query_flag", DictionaryConstants.BOL_FALSE);
//		if (resultData != null && !resultData.isEmpty() && !StringHelper.isBlank(resultData.getString("trdacct")))
//		{
//			outputData.set("query_flag", DictionaryConstants.BOL_TRUE);
//		}
//		return outputData;
//	}
//	
//	@Override
//	@SuppressWarnings("unchecked")
//	public List<DataRow> getAllAssetInfo(DataRow inputParam) throws Exception
//	{
//		inputParam.set("moneytype", inputParam.getString("moneytype")); //货币类型
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYSTOCKASSET, inputParam);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outList = new ArrayList<DataRow>();
//		for (DataRow resultData : resultList)
//		{
//			DataRow outPut = new DataRow();
//			outPut.set("fundbal", resultData.getString("fundbal"));//余额
//			outPut.set("marketvalue", resultData.getString("marketvalue"));//资产总值
//			outPut.set("fund", resultData.getString("fund"));//资金资产
//			outPut.set("stkvalue", resultData.getString("stkvalue"));//市值
//			//outPut.set("fundtype", resultData.getString("fundtype"));//资金帐号类型
//			outPut.set("fundtype", ThirdInterfaceConstant.USER_ACCOUNT_TYPE_ZQ);
//			outPut.set("fundid", resultData.getString("fund_account"));//资金帐号
//			outList.add(outPut);
//		}
//		return outList;
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> getQuestionnaireQues(DataRow input)
//	{
//		input.set("paper_type", input.getString("sub_id"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYEFXCPQUESTION, input);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outPutList = new ArrayList<DataRow>();
//		for (DataRow item : resultList)
//		{
//			DataRow newQuestion = new DataRow();
//			newQuestion.set("sub_id", input.getString("sub_id")); //问卷编号
//			newQuestion.set("q_name", item.getString("question_name")); //题目内容
//			newQuestion.set("que_id", item.getString("question_no")); //题目编号
//			newQuestion.set("type", item.getString("question_type")); //问题类型（0：单选，1：多选）
//			newQuestion.set("ans_id", item.getString("answer_index")); //答案id
//			newQuestion.set("mark", item.getString("answer_score")); //分值
//			newQuestion.set("a_name", item.getString("answer_name")); //答案内容
//			newQuestion.set("c_a_id", item.getString("c_a_id")); //用户选择的答案id
//			outPutList.add(newQuestion);
//		}
//		return outPutList;
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> openedFundAccountList(DataRow input) throws InvokeException
//	{
//		if (!StringHelper.isBlank(input.getString("ta_code")))
//		{
//			input.set("ta_code", input.getString("ta_code")); //基金公司	
//		}
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_OPENEDFUNDACCOUNT, input);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outputList = new ArrayList<DataRow>();
//		for (int i = 0; i < resultList.size(); i++)
//		{
//			DataRow resultItem = (DataRow) resultList.get(i);
//			DataRow outputItem = new DataRow();
//			outputItem.set("ta_code", resultItem.getString("ta_code"));//基金代码
//			outputItem.set("ta_acct", resultItem.getString("ta_acct"));//基金帐号
//			outputItem.set("open_date", resultItem.getString("open_date"));//开立日期 yyyy-MM-dd
//			outputItem.set("ta_name", resultItem.getString("ta_name"));//基金名称
//			outputList.add(outputItem);
//		}
//		return outputList;
//	}
//	
//	@Override
//	public DataRow queryCYBAccount(DataRow input)
//	{
//		input.set("trdacct", input.getString("trdaccount"));
//		input.set("query_type", input.getString("query_type"));
//		if (StringUtils.isBlank(input.getString("query_type")))
//		{
//			input.set("query_type", ThirdTBASConstants.THIRDINTERFACE_QUERYTYPE_GTANDZD);
//		}
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYCYB, input);
//		DataRow resultData = result.getData();
//		String signedinZd = resultData.getString("signedinZd");
//		String signedinLocal = resultData.getString("signedinLocal");
//		DataRow outputData = new DataRow();
//		outputData.set("trdacct", input.getString("trdaccount")); //交易帐号
//		outputData.set("bind_state", DictionaryConstants.BOL_TRUE); //绑定状态 0未绑定 1已绑定
//		outputData.set("query_flag", DictionaryConstants.BOL_TRUE);
//		outputData.set("open_data", resultData.getString("sign_date"));//签署日期
//		outputData.set("open_type", resultData.getString("sign_cls"));//签署类型
//		if (DictionaryConstants.BOL_FALSE.equals(signedinZd))
//		{
//			outputData.set("query_flag", DictionaryConstants.BOL_FALSE);
//		}
//		if (DictionaryConstants.BOL_FALSE.equals(signedinLocal))
//		{
//			outputData.set("bind_state", DictionaryConstants.BOL_FALSE);
//		}
//		return outputData;
//	}
//	
//	@Override
//	public DataRow openFundAccount(DataRow input) throws InvokeException
//	{
//		input.set("ta_code", input.getString("ta_code"));
//		input.set("addr", input.getString("address"));
//		input.set("postid", input.getString("postcode"));
//		input.set("moblieno", input.getString("mobile"));
//		input.set("email", input.getString("email"));
//		input.set("occupational", input.getString("occupational"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_OPENFUNDACCOUNT, input);
//		DataRow resultData = result.getData();
//		DataRow output = new DataRow();
//		output.set("account", resultData.getString("account")); //资金账号
//		output.set("ta_acc", resultData.getString("ta_acc")); //基金账号
//		return output;
//	}
//	
//	@Override
//	public DataRow queryFundRiskInfo(DataRow input)
//	{
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERY_FUNDRISKINFO, input);
//		DataRow resultData = result.getData();
//		DataRow outData = new DataRow();
//		if (resultData != null && !resultData.isEmpty())
//		{
//			outData.set("status", resultData.getString("status"));//-1 已过期，0 未提交过 1-正常
//			outData.set("message", resultData.getString("message"));//状态说明
//		}
//		return outData;
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> queryFundRiskQuestions(DataRow input) throws InvokeException
//	{
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERY_FUNDRISKQUESTIONS, input);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outputList = new ArrayList<DataRow>();
//		for (int i = 0; i < resultList.size(); i++)
//		{
//			DataRow resultItem = (DataRow) resultList.get(i);
//			DataRow outputItem = new DataRow();
//			outputItem.set("sub_id", resultItem.getString("sub_id"));//问卷编号
//			outputItem.set("que_id", resultItem.getString("que_id"));//题目编号
//			outputItem.set("q_name", resultItem.getString("q_name"));//题目内容
//			outputItem.set("ans_id", resultItem.getString("ans_id"));//答案编号
//			outputItem.set("a_name", resultItem.getString("a_name"));//答案内容
//			outputItem.set("mark", resultItem.getString("mark"));//分数
//			outputList.add(outputItem);
//		}
//		return outputList;
//	}
//	
//	@Override
//	public DataRow submitFundRiskAnswers(DataRow input)
//	{
//		input.set("answer", input.getString("answer"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERY_SUBMITFUNDRISKANSWERS, input);
//		DataRow resultData = result.getData();
//		return resultData;
//	}
//	
//	@Override
//	public DataRow getFirsTransactionData(DataRow input)
//	{
//		//先查询数据库是否有数据，没有再查询中登
//		Long userId = input.getLong("user_id");
//		UserInfoService userInfoService = SpringHelper.getBean(BusinessServiceBeanIdConstants.SERVICE_ID_USERINFO, UserInfoService.class);
//		UserExtendModel userExtend = userInfoService.queryUserExtendByUserId(userId);
//		if (userExtend != null && !StringHelper.isBlank(userExtend.getFirstTradingDay()))
//		{
//			DataRow result = new DataRow();
//			result.set("firsTransactionData", userExtend.getFirstTradingDay());
//			return result;
//		}
//		//判断是否是交易时间
//		DataRow output = new DataRow();
//		output.set("isTrade", DictionaryConstants.BOL_FALSE); //是否是交易时间
//		TradeTimeService tradeTimeService = SpringHelper.getBean(BasicServiceBeanIdConstants.SERVICE_ID_TRADETIME, TradeTimeService.class);
//		if (tradeTimeService.checkZdTradeTime())
//		{
//			Result result = getThirdResult(ThirdTBASConstants.FUNCTION_FIRSTTRDDATE, input);
//			DataRow resultData = result.getData();
//			output.set("isTrade", DictionaryConstants.BOL_TRUE); //是否是交易时间
//			output.set("firsTransactionData", resultData.getString("first_trdDate")); //首次交易日 YYYYMMDD,没有返回空串
//			if (!StringHelper.isBlank(resultData.getString("first_trdDate")))
//			{
//				UserExtendModel updateExtend = new UserExtendModel();
//				updateExtend.setUserId(userId);
//				updateExtend.setFirstTradingDay(resultData.getString("first_trdDate"));
//				userInfoService.updateUserExtend(updateExtend);
//			}
//		}
//		
//		return output;
//	}
//	
//	@Override
//	public void openTsgp(DataRow input)
//	{
//		input.set("trdacct", input.getString("trdaccount"));
//		getThirdResult(ThirdTBASConstants.FUNCTION_OPENTSGP, input);
//		
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> queryJJdetailInfoList()
//	{
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_FUNDCONPANYLIST, new DataRow());
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outputList = new ArrayList<DataRow>();
//		for (int i = 0; i < resultList.size(); i++)
//		{
//			DataRow resultItem = (DataRow) resultList.get(i);
//			DataRow outputItem = new DataRow();
//			outputItem.set("id", resultItem.getString("fund_company"));
//			outputItem.set("name", resultItem.getString("company_name"));
//			outputItem.set("tacode", resultItem.getString("fund_company"));
//			outputItem.set("agree_type", resultItem.getString("subscribe_type"));
//			outputItem.set("state", resultItem.getString("exchange_status"));
//			outputList.add(outputItem);
//		}
//		return outputList;
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> queryFundCompanyList(DataRow input) throws InvokeException
//	{
//		if (!StringHelper.isBlank(input.getString("ta_code")))
//		{
//			input.set("ta_code", input.getString("ta_code")); //基金公司	
//		}
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_FUNDCONPANYLIST, input);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outputList = new ArrayList<DataRow>();
//		for (int i = 0; i < resultList.size(); i++)
//		{
//			DataRow resultItem = (DataRow) resultList.get(i);
//			DataRow outputItem = new DataRow();
//			outputItem.set("tacode", resultItem.getString("ta_code"));//基金代码
//			outputItem.set("name", resultItem.getString("ta_name"));//基金名称
//			outputList.add(outputItem);
//		}
//		return outputList;
//	}
//	
//	@Override
//	public DataRow policeCheck(DataRow input)
//	{
//		input.set("idtype", input.getString("identity_type"));
//		input.set("custname", input.getString("name"));
//		input.set("idno", input.getString("identity_num"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_POLICECHECK, input);
//		DataRow resultData = result.getData();
//		DataRow outData = new DataRow();
//		String check_flag = DictionaryConstants.BOL_FALSE;
//		if (resultData != null && !resultData.isEmpty())
//		{
//			outData.set("identity_num", resultData.getString("idno"));//身份证号码
//			outData.set("name", resultData.getString("custname"));//姓名
//			outData.set("photos", resultData.getString("photos"));//身份证大头照base64
//			outData.set("retFlag", resultData.getString("retFlag"));//校验结果   >=0表示信息正确，<0表示错误
//			outData.set("retMsg", resultData.getString("retMsg"));//返回说明
//			outData.set("source", resultData.getString("source"));//公安校验渠道类型(1:中登;2:众融;3:昊一;4:金证;5:龙团;)
//			if (resultData.getInt("retFlag") >= 0)
//			{
//				check_flag = DictionaryConstants.BOL_TRUE;
//			}
//		}
//		outData.set("check_flag", check_flag);
//		return outData;
//	}
//	
//	@Override
//	public void regJg(DataRow input)
//	{
//		input.set("trdacct", input.getString("trdaccount"));
//		getThirdResult(ThirdTBASConstants.FUNCTION_JG, input);
//		
//	}
//	
//	@Override
//	public void regZdjy(DataRow input)
//	{
//		input.set("trdacct", input.getString("trdaccount"));
//		getThirdResult(ThirdTBASConstants.FUNCTION_ZDJY, input);
//		
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> queryOTCAccount(DataRow thirdInput)
//	{
//		thirdInput.set("client_id", thirdInput.getString("client_id"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYOTCACCOUNT, thirdInput);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outPutList = new ArrayList<DataRow>();
//		if (resultList != null && resultList.size() != 0)
//		{
//			for (int i = 0; i < resultList.size(); i++)
//			{
//				DataRow item = resultList.get(i);
//				DataRow outItem = new DataRow();
//				outItem.set("client_id", item.getString("client_id"));
//				outItem.set("fund_account", item.getString("fund_account"));
//				outItem.set("otc_code", item.getString("otc_code"));//登记机构
//				outItem.set("otc_acct", item.getString("otc_acct"));//登记账号
//				outItem.set("trans_acct", item.getString("trans_acct"));//交易账号
//				outItem.set("otc_state", item.getString("otc_state"));//OTC状态
//				outItem.set("open_date", item.getString("open_date"));//开通时间
//				outPutList.add(outItem);
//			}
//		}
//		return outPutList;
//	}
//	
//	@Override
//	public DataRow openOTCAccount(DataRow thirdInput)
//	{
//		thirdInput.set("client_id", thirdInput.get("client_id"));
//		thirdInput.set("fund_account", thirdInput.get("account"));
//		thirdInput.set("otc_code", thirdInput.get("otc_code"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_OPENOTCACCOUNT, thirdInput);
//		DataRow item = result.getData();
//		DataRow outItem = new DataRow();
//		outItem.set("client_id", item.getString("client_id")); //客户号
//		outItem.set("fund_account", item.getString("fund_account"));//资金账号
//		outItem.set("otc_code", item.getString("otc_code"));//登记机构
//		outItem.set("otc_acct", item.getString("otc_acct"));//登记账号
//		return outItem;
//	}
//	
//	@Override
//	public void checkFundNotTrade(DataRow thirdInput)
//	{
//		// TODO Auto-generated method stub
//		
//	}
//	
//	@Override
//	public DataRow isOpenGpzyhg(DataRow thirdInput)
//	{
//		DataRow result = new DataRow();
//		result.set("open_state", DictionaryConstants.BOL_FALSE);
//		return result;
//	}
//	
//	@Override
//	public void openGpzyhgAccount(DataRow thirdInput)
//	{
//		// TODO Auto-generated method stub
//		
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<OtcInfo> queryAllOTCInfo(DataRow thirdInput)
//	{
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYALLOTCACCOUNT, thirdInput);
//		List<DataRow> returnList = result.getList();
//		List<DataRow> outputList = new ArrayList<DataRow>();
//		if (returnList != null && returnList.size() != 0)
//		{
//			for (DataRow item : returnList)
//			{
//				DataRow outputItem = new DataRow();
//				outputItem.set("otc_code", item.get("otc_code")); //登记机构
//				outputItem.set("otc_name", item.get("otc_name"));//OTC产品
//				outputItem.set("otc_desc", item.get("otc_desc")); //产品描述
//				outputItem.set("ta_flag", item.get("ta_flag"));//Ta标示
//				outputItem.set("otc_survey", item.get("otc_survey"));//风险测评信息
//				outputItem.set("survey_flag", item.get("survey_flag"));
//				outputList.add(outputItem);
//			}
//		}
//		return ModelUtil.packList(outputList, OtcInfo.class);
//	}
//	
//	@Override
//	public DataRow resetPwd(DataRow input) throws Exception
//	{
//		if (DictionaryConstants.BOL_FALSE.equals(Configuration.getString("system.third_need_operator")))
//		{
//			BranchInfoService branchInfoService = SpringHelper.getBean(BasicServiceBeanIdConstants.SERVICE_ID_BRANCHINFO, BranchInfoService.class);
//			BranchExtinfoModel branchInfo = branchInfoService.queryByBranchNo(input.getString("org_id"));
//			if (branchInfo == null)
//			{
//				throw new BusinessException(ThirdTBASConstants.DBCONFIG_ERROR_NOBRANCH);
//			}
//			input.set("operator_code", branchInfo.getCustCode()); //操作员账号（根据营业部查询对应的操作员账号）
//			input.set("operator_pwd", branchInfo.getCustPwd()); //操作员密码 	恒生必须
//		}
//		input.set("new_password", input.getString("new_password")); //新密码
//		input.set("password_type", input.getString("password_type")); //密码类型 1-资金密码，2-交易密码（该接口为重置交易密码）
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_RESETPWD, input);
//		DataRow resultData = result.getData();
//		DataRow outPutData = new DataRow();
//		outPutData.set("flag", resultData.getBoolean("flag"));
//		outPutData.set("message", resultData.getString("message"));
//		return outPutData;
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> accountStatement(DataRow input) throws InvokeException
//	{
//		
//		input.set("strdate", input.getString("strdate"));
//		input.set("enddate", input.getString("enddate"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYDZDZD, input);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outList = new ArrayList<DataRow>();
//		for (DataRow resultItem : resultList)
//		{
//			DataRow outputItem = new DataRow();
//			outputItem.set("orderdate", resultItem.getString("happentime")); //发生日期
//			outputItem.set("digestname", resultItem.getString("businessnote")); //业务说明
//			outputItem.set("client_id", input.getString("client_id")); //客户号
//			outputItem.set("orgid", input.getString("branchno")); //机构号
//			outputItem.set("fundid", input.getString("fund_account")); //资金帐号
//			outputItem.set("secuid", resultItem.getString("trdacct")); //股东代码  交易帐号
//			outputItem.set("stkcode", resultItem.getString("stkcode")); //证券代码
//			outputItem.set("stkname", resultItem.getString("stkname")); //证券名称
//			outputItem.set("matchqty", resultItem.getString("transactcount")); //成交数量
//			outputItem.set("matchprice", resultItem.getString("transactprice"));//成交价格
//			outputItem.set("matchamt", resultItem.getString("transactmoney")); //成交金额
//			outputItem.set("fee_sxf", resultItem.getString("handlingcharge")); //佣金
//			outputItem.set("fee_yhs", resultItem.getString("stampduty")); //印花税
//			outputItem.set("fee_ghf", resultItem.getString("transferfee")); //过户费
//			outList.add(outputItem);
//		}
//		return outList;
//	}
//	
//	@Override
//	public DataRow openOtc(DataRow thirdInput)
//	{
//		// TODO Auto-generated method stub
//		return null;
//	}
//	
//	@Override
//	public DataRow changeMainFund(DataRow thirdInput)
//	{
//		thirdInput.set("auxiliary_account", thirdInput.get("auxiliary_account"));//辅资金帐号（变更后为住资金帐号）
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_CHANGEMAINFUND, thirdInput);
//		return result.getData();
//	}
//	
//	@Override
//	public DataRow queryBankBalance(DataRow thirdInput)
//	{
//		thirdInput.set("op_account", thirdInput.get("op_account"));//操作的银行卡的资金帐号
//		thirdInput.set("bankcode", thirdInput.get("bankcode"));//银行卡号
//		thirdInput.set("fund_password", thirdInput.get("fund_password"));//资金密码
//		thirdInput.set("bank_password", thirdInput.get("bank_password"));//银行卡密码
//		thirdInput.set("money_type", thirdInput.get("money_type"));//货币类型
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_CHANGEMAINFUND, thirdInput);
//		return result.getData();
//	}
//	
//	@Override
//	public DataRow openLof(DataRow input)
//	{
//		// TODO Auto-generated method stub
//		return null;
//	}
//	
//	@SuppressWarnings("unchecked")
//	@Override
//	public List<DataRow> queryZJAccAuthority(DataRow thirdInput)
//	{
//		thirdInput.set("trdacct_right", thirdInput.getString("agmt_type_str"));
//		thirdInput.set("trdacct", thirdInput.getString("trdaccount"));
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYZJAUTHORITY, thirdInput);
//		List<DataRow> resultList = result.getList();
//		List<DataRow> outList = new ArrayList<DataRow>();
//		for (DataRow resultData : resultList)
//		{
//			DataRow outPut = new DataRow();
//			outPut.set("fund_account", resultData.getString("fund_account")); //资金帐号
//			outPut.set("cust_agmt_type", resultData.getString("trdacct_right"));//股东号权限，多个用“,”分隔【】
//			outPut.set("trdacct_type", resultData.getString("trdacct_type")); //股东类型
//			StockEnum stockEnum = StockEnum.getEnumByTrdaccType(resultData.getString("trdacct_type"));
//			if (stockEnum != null)
//			{
//				outPut.set("stkbd", stockEnum.getStkbd()); //交易板块
//				outPut.set("trdacct_excls", stockEnum.getCls()); //交易板块
//			}
//			outPut.set("trdacct", resultData.getString("trdacct")); //交易账户
//			outList.add(outPut);
//		}
//		return outList;
//	}
//	
//	@SuppressWarnings("rawtypes")
//	@Override
//	public List<DataRow> queryContactList(DataRow thirdInput)
//	{
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERYCONTACTLIST, thirdInput);
//		List resultList = result.getList();
//		List<DataRow> outputList = new ArrayList<DataRow>();
//		for (int i = 0; i < resultList.size(); i++)
//		{
//			DataRow resultItem = (DataRow) resultList.get(i);
//			DataRow outputItem = new DataRow();
//			outputItem.set("client_id", resultItem.getString("client_id"));//客户号
//			outputItem.set("id", resultItem.getString("id"));//第二联系人ID
//			outputItem.set("emergency_name", resultItem.getString("linkman"));//第二联系人姓名
//			outputItem.set("emergency_tel", resultItem.getString("linkman_tel"));//第二联系人电话号码
//			outputItem.set("emergency_address", resultItem.getString("linkman_addr"));//第二联系人地址
//			outputItem.set("emergency_relation", resultItem.getString("linkman_relation"));//第二联系人关系
//			outputList.add(outputItem);
//		}
//		return outputList;
//	}
//	
//	@Override
//	public DataRow queryInsert(DataRow params) throws Exception {
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_QUERENJILU, params);
//		DataRow resultData = result.getData();
//		return resultData;
//	}
//	
//	@Override
//	public DataRow queryEvaluationResult(DataRow input) throws Exception {
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_EVALUATIONRESULT, input);
//		DataRow resultData = result.getData();
//		DataRow outPutData = new DataRow();
//		outPutData.set("client_id", resultData.getBoolean("client_id"));//客户编号
//		outPutData.set("paper_type", resultData.getString("paper_type"));//试卷类别
//		outPutData.set("prodta_no", resultData.getBoolean("prodta_no"));//产品TA编号
//		outPutData.set("risk_level", resultData.getString("risk_level"));//风险级别
//		outPutData.set("paper_score", resultData.getBoolean("paper_score"));//试卷得分
//		outPutData.set("paper_answer", resultData.getString("paper_answer"));//试卷答案
//		outPutData.set("risk_level_old", resultData.getBoolean("risk_level_old"));//上次风险级别
//		outPutData.set("join_paper_type", resultData.getString("join_paper_type"));//关联试卷类型
//		outPutData.set("join_paper_answer", resultData.getBoolean("join_paper_answer"));//关联试卷答案
//		outPutData.set("autoeligtest_status", resultData.getString("autoeligtest_status"));//风险等级自动测评状态
//		return outPutData;
//	}
//   
//	@Override
//	public DataRow queryResultValidation(DataRow input) throws Exception {
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_RESULTVALIDATION, input);
//		DataRow resultData = result.getData();
//		DataRow outPutData = new DataRow();
//		outPutData.set("autoeligtest_status", resultData.getBoolean("autoeligtest_status"));
//		outPutData.set("op_remark", resultData.getString("op_remark"));
//		return outPutData;
//	}
//    
//	@Override
//	public DataRow queryUserKeyGeneration(DataRow input) throws Exception {
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_USERKEYGENERATION, input);
//		DataRow resultData = result.getData();
//		DataRow outPutData = new DataRow();
//		outPutData.set("user_key", resultData.getBoolean("user_key"));
//		return outPutData;
//	}
//
//	@Override
//	public DataRow queryUserIdentityAuthentication(DataRow input)
//			throws Exception {
//		Result result = getThirdResult(ThirdTBASConstants.FUNCTION_USERIDENTITYAUTHENTICATION, input);
//		DataRow resultData = result.getData();
//		return resultData;
//	}
//
//	@Override
//	public DataRow checkCancelBankAccount(DataRow input) throws Exception {
//		return null;
//	}
//
//	@Override
//	public DataRow svrbankPreDrawReg(DataRow input) throws Exception {
//		return null;
//	}
//
//	@Override
//	public DataRow getMoneyType(DataRow input) throws Exception {
//		// TODO Auto-generated method stub
//		return null;
//	}
//
//	@Override
//	public List<DataRow> getAccoutFlag(DataRow input) throws Exception {
//		// TODO Auto-generated method stub
//		return null;
//	}
//
//	@Override
//	public List<DataRow> queryBillList(DataRow input) {
//		// TODO Auto-generated method stub
//		return null;
//	}
//
//    @Override
//    public DataRow querySubRiskFlag(DataRow input)
//    {
//        // TODO Auto-generated method stub
//        return null;
//    }
//
//    @Override
//    public List queryFundCompanyOrCode(DataRow thirdInput)
//    {
//        // TODO Auto-generated method stub
//        return null;
//    }
//
//    @Override
//    public DataRow signRiskContract(DataRow thirdInput)
//    {
//        // TODO Auto-generated method stub
//        return null;
//    }
//
//    @Override
//    public DataRow exteilgTemplateQry(DataRow thirdRow)
//    {
//        // TODO Auto-generated method stub
//        return null;
//    }
//
//	@Override
//	public List signEcontract(DataRow thirdInput) throws Exception {
//		// TODO Auto-generated method stub
//		return null;
//	}
//
//	@Override
//	public DataRow queryTracct(DataRow thirdInput) throws Exception {
//		// TODO Auto-generated method stub
//		return null;
//	}
//
//	@Override
//	public DataRow queryContract(DataRow thirdInput) throws Exception {
//		// TODO Auto-generated method stub
//		return null;
//	}
//
//	@Override
//	public void openKCB(DataRow input) {
//		// TODO Auto-generated method stub
//	}
//
//	@Override
//	public DataRow signFundElectronicContract(DataRow input) throws Exception {
//		// TODO Auto-generated method stub
//		return null;
//	}
//
//	@Override
//	public DataRow checkHKAsset(DataRow input) throws Exception {
//		// TODO Auto-generated method stub
//		return null;
//	}
//
//	@Override
//	public DataRow qryClientPrefer(DataRow input) throws Exception {
//		// TODO Auto-generated method stub
//		return null;
//	}
//
//	@Override
//	public DataRow signKcbElectronicContract(DataRow input) throws Exception {
//		// TODO Auto-generated method stub
//		return null;
//	}
//
//}
