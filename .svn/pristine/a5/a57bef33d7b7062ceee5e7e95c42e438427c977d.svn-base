package com.thinkive.fxc.ismp.bus.business.dzhtqs.function;


import com.thinkive.base.jdbc.DataRow;
import com.thinkive.base.util.SpringHelper;
import com.thinkive.fxc.ismp.bus.base.business.constants.BusinessServiceBeanIdConstants;
import com.thinkive.fxc.ismp.bus.base.business.service.UserInfoService;
import com.thinkive.fxc.ismp.bus.base.business.vo.UserInfoVo;
import com.thinkive.fxc.ismp.bus.base.common.ISMPBaseFunction;
import com.thinkive.fxc.ismp.bus.third.constants.ThirdDictionaryConstants;
import com.thinkive.fxc.ismp.bus.third.constants.ThirdInterfaceConstant;
import com.thinkive.fxc.ismp.bus.third.service.ThirdInterface;
import com.thinkive.server.InvokeException;
import com.thinkive.server.ResultVo;

public class Function1005006 extends ISMPBaseFunction
{
    private ThirdInterface thirdInterface;
    private String prodta_no="";
    private String prod_code="";
    @Override
    public ResultVo execute() throws InvokeException, Exception
    {
        
        checkinput();
        UserInfoService userInfoService = SpringHelper.getBean(BusinessServiceBeanIdConstants.SERVICE_ID_USERINFO, UserInfoService.class);
        UserInfoVo userInfoVo = userInfoService.queryAndCheckUserByUserIdAndType(userId, ThirdInterfaceConstant.USER_ACCOUNT_TYPE_ZQ);
        DataRow thirdInput = new DataRow();
        thirdInput.set("client_id", userInfoVo.getClientId()); 
        thirdInput.set("fund_account", userInfoVo.getFundAccount());
        thirdInput.set("prodta_no", prodta_no);
        thirdInput.set("prod_code",prod_code);
        thirdInterface = SpringHelper.getBean(ThirdDictionaryConstants.SERVICE_ID_THIRDINTERFACE, ThirdInterface.class);
        ResultVo vo = new ResultVo();
        try
        {
           DataRow resultRow=thirdInterface.queryTracct(thirdInput);
         
           vo.setResult(resultRow);
        }
        catch (Exception e)
        {
            logger.info("¥ÌŒÛ–≈œ¢£∫"+e);
            throw new InvokeException(-100500601, e+"");
            
        }
       
        return vo;
    }
	private void checkinput() {
		prodta_no=this.getCheckBlankStrParam("prodta_no");
		prod_code=this.getCheckBlankStrParam("prod_code");

	}
    
}
